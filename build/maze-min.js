!function(){function t(t){var e=[],r=t=>Math.floor((t-1)/2),f=t=>2*t+1,o=t=>2*(t+1),a=function(t,n){var r=e[t];e[t]=e[n],e[n]=r},i=(t=t||{}).compare||((t,e)=>t<e);return{get:t=>void 0==t?e:e[t],push:function(){return Array.from(arguments).forEach(t=>{for(n=e.push(t)-1;n>0&&i(e[n],e[r(n)]);)a(n,r(n)),n=r(n)}),e.length},empty:()=>0==e.length,pop:function(){if(!this.empty()){var t=0,n=e[t];if(1==e.length)e.pop();else for(e[t]=e.pop();e[f(t)]&&i(e[f(t)],e[t])||e[o(t)]&&i(e[o(t)],e[t]);)e[o(t)]&&i(e[o(t)],e[f(t)])?(a(t,o(t)),t=o(t)):(a(t,f(t)),t=f(t));return n}}}}var e,r,f=t=>document.getElementById(t),o=f("canvas"),a=o.getContext("2d"),i=!1,u=f("sizetxt"),h=f("algotxt"),l=f("speedtxt"),y=f("resetbtn"),p=f("pausebtn"),s=new function(){var n,f,y,s,x,c,v,w,d,g={},m={compare:(t,e)=>t.w<e.w},M=()=>Math.floor(10*Math.random()),I=(t,e,r)=>{a.fillStyle=r,a.fillRect(n*t,n*e,n,n)},E=function(t,e,n,r){if(n=n||t,r=r||e,0==v[t][e]){v[t][e]=v[n][r]=1;var o,a=[];for(t-2>0&&a.push({w:M(),x:t-2,y:e,fx:t-1,fy:e}),e-2>0&&a.push({w:M(),x:t,y:e-2,fx:t,fy:e-1}),t+2<f-1&&a.push({w:M(),x:t+2,y:e,fx:t+1,fy:e}),e+2<y-1&&a.push({w:M(),x:t,y:e+2,fx:t,fy:e+1}),a.sort((t,e)=>t.w<e.w);o=a.pop();)s.get().filter(({x:t,y:e})=>t==o.x&&e==o.y).length<1&&0==v[o.x][o.y]&&s.push({w:M(),x:o.x,y:o.y,fx:o.fx,fy:o.fy})}},b=function(t){a.clearRect(0,0,window.innerWidth,window.innerHeight),s.get().forEach(({x:t,y:e,fx:n,fy:r})=>{I(t,e,"red"),I(n,r,"red")});for(var e=f-1;e>=0;e--)for(var n=y-1;n>=0;n--)1==v[e][n]&&I(e,n,"white");I(t.x,t.y,"blue")},k=function(t,e){for(var n=[],r=t-1;r>=0;r--){n[r]=[];for(var f=e-1;f>=0;f--)n[r][f]=0}return n},P=function(){var t;i||((t=d.pop())?(function(t,e){if(1==v[t][e]&&0==w[t][e]){w[t][e]=1;var n,r=[];for(t-2>0&&r.push({x:t-2,y:e}),e-2>0&&r.push({x:t,y:e-2}),t+2<f-1&&r.push({x:t+2,y:e}),e+2<y-1&&r.push({x:t,y:e+2});n=r.shift();)d.filter(({x:t,y:e})=>t==n.x&&e==n.y).length<1&&d.push(n);if(v[t-1][e]+v[t][e-1]+v[t+1][e]+v[t][e+1]==1&&M()<=2.5){var o,a=[];for(a.push({w:M(),x:t-2,y:e,fx:t-1,fy:e}),a.push({w:M(),x:t+2,y:e,fx:t+1,fy:e}),a.push({w:M(),x:t,y:e-2,fx:t,fy:e-1}),a.push({w:M(),x:t,y:e+2,fx:t,fy:e+1}),a.sort((t,e)=>t.w<e.w);o=a.shift();)if(o.x>0&&o.y>0&&o.x<f-1&&o.y<y-1&&0==v[o.fx][o.fy]){v[o.fx][o.fy]=1;break}}}}(t.x,t.y),b(t)):clearInterval(e))},L=function(){if(!i)if(s.empty())clearInterval(e),w=k(f,y),(d=[]).push({x:x,y:c}),e=setInterval(P,r);else{var t=s.pop();E(t.x,t.y,t.fx,t.fy),b(t)}};return g.start=function(){o.width=window.innerWidth-10,o.height=window.innerHeight-50,n=u.value,f=Math.floor(o.width/n),y=Math.floor(o.height/n),r=l.value||1,i=!1,p.value="Pause",s=0==h.value?new function(){var t=[];return{get:e=>void 0==e?t:t[e],empty:()=>0==t.length,push:e=>t.push(e),pop:()=>t.shift()}}:1==h.value?new function(){var t=[];return{get:e=>void 0==e?t:t[e],empty:()=>0==t.length,push:e=>t.push(e),pop:()=>t.pop()}}:new t(m),x=2*Math.floor(Math.random()*(f-2)/2)+1,c=2*Math.floor(Math.random()*(y-2)/2)+1,v=k(f,y),E(x,c),e=setInterval(L,r)},g.start(),g};y.addEventListener("click",function(){clearInterval(e),s.start()}),window.onresize=function(){y.click()},p.addEventListener("click",function(){i=!i,p.value="Pause"==p.value?"Play":"Pause"}),l.addEventListener("change",function(){r=this.value,clearInterval(e),e=setInterval(s.renderView,r)})}();